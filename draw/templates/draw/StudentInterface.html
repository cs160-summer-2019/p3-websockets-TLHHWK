{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>StudentInterface</title>

    <link rel="stylesheet" type="text/css" href="{% static 'draw/vendor/bootstrap/css/bootstrap.min.css' %}">
    <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css?family=Luckiest+Guy&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Bree+Serif&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Patrick+Hand&display=swap" rel="stylesheet">
<!--     CSS书写顺序
1.位置属性 (position, top, right, z-index, display, float等)　　
2.大小 (width, height, padding, margin)　　
3.文字系列 (font, line-height, letter-spacing, color- text-align等)　　
4.背景 (background, border等)
5.其他 (animation, transition等) -->
    <style type="text/css">
      body {background-color: #abdaee;}
      .name
      {
        font-size: 25px;
        font-family: Arial;
        font-weight:bolder;
      }

      #qlabel {
        position:absolute;
        top: 58px;
        left: 300px;
        font-size: 60px;
        font-family: 'Bree Serif', serif;
        
      }
      .Title
      {
               position: absolute;
        top:130px;
        left:70px;
        text-align:center;
        vertical-align: middle;
        border-radius: 25px;
        width:830px;/*定宽*/
        height:170px;
        background-color: #ffd025;
        font-size: 32px;
        font-family: 'Bree Serif', serif;
        padding: 45px 27px;
      }
      
        .InputBox 
      {
        position:absolute;
	      top:300px;
        left:280px;
	      width:450px;
        height:90px;
	      vertical-align:middle;
        font-family: 'Bree Serif', serif;
	      font-size:28px;
        padding: 25px 20px;
       background-color: white;
        border-radius: 4px;
  border: none;
  border-bottom: 1px solid #000000;
  -webkit-box-shadow: none;
  box-shadow: none;
  border-radius: 0;
	    }
      
     
      
      
      
        .SubmitButton
        {
        position:absolute;
	      top:430px;
        left:40%;
        background-color: #3c2dc5;
        color:white;
          font-size: 23px;
           font-family: 'Bree Serif', serif;
        
        }
      
      .HelpButton
        {
        position:absolute;
	      top:430px;
        left:52%;
        background-color: #3c2dc5;
        color:white;
          font-size: 23px;
           font-family: 'Bree Serif', serif;
        
        }
      
 .wrap{
  position:absolute;
  top:20px;
  right:20px;
	width:50px;
	height:50px;
	border-radius:50%;
	position:absolute;

   background-color: #3c2dc5;
} 
 
 
#timer{
	position:absolute;
	top:10px;
	right:14px;
	font-size:20px;
  font-family: 'Bree Serif', serif;
  color: white;
}
      body
      {
        position:relative;
      }
      iframe
      {
        
        position:absolute;
        top:350px;
        width:100%;
        display:none;
      }
     
      #Slogan
      {
        
        position:absolute;
        right:270px;
        top:500px;
        font-family:'Luckiest Guy', cursive;
        font-size:22px;
      }
      
      .modal-header, .modal-footer {
        background-color: #ffd025;
        text-align: center;
      }
      .modal-title {
        font-size: 50px;
        text-align: center;
        font-family:'Luckiest Guy', cursive;
      }
      
      .NameBox {
          border: none;
        left: 70%;
          background-color: none;
          outline: 0;
          font-size: 28px;
          width: 300px;
          height: 30px;
          display: inline-block;
         font-family: 'Bree Serif', serif;
      }
      
      .modal-body {
        text-align: center;
      }
      .modal-footer { 
        padding-left:40%;
          font-family: 'Bree Serif', serif;
        font-size: 23px;
      }
      .button {
      background-color: #242140;
  border: none;
  color: white;
  padding: 20px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 20px;
  margin: 4px 2px;
        border-radius: 12px;
}
    </style>

</head>
<body>
  <div class="modal" id = "my-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Criss Cross Puzzle Challenge</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body ">
        <br /><br />
        <input id="NameBox" class="NameBox" value="" placeholder="first and last name"/>
        <br />
        <br />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-outline-dark "data-dismiss="modal" onclick="begintime()">begin!</button>
      </div>
    </div>
  </div>
</div>
   
 
  <div class = "container">
    <div class = "Title" id ="Question"></div>
  </div>
  
   
<div class="wrap">
    <div id="timer" >
        <span id="second">00</span>
    </div>
</div>

  <div>
  <input id="test" class="InputBox" value="" placeholder="write your answer here!"/>
<!--     Respect -->
    <button type="button" id = "submit" class="btn btn-primary btn-lg SubmitButton"  onClick = "fun()">submit</button>
    <button type="button" id ="switch" class="btn btn-primary btn-lg HelpButton" onClick = "switchQ()">switch</button>
  </div>
  
  <div id="Slogan">week 1 of criss cross puzzle challenge</div>
  <div id="qlabel">your question:</div>
</body>
  
<script>
  
  var currq;

     function fun(){
       second = document.getElementById("second");
       StudentName = document.getElementById("NameBox");
       QuestionString = document.getElementById("Question");
       AnswerString = document.getElementById("test");
      var information = 
                {
                  To:'teacher',
                  From:StudentName.value,
                  Question:QuestionString.innerText,
                  Answer:AnswerString.value,
                  Time:second.innerText,
                }
            var informationJSON = JSON.stringify(information);
            socket.send(informationJSON);
        }
      //use for connection
      var url = window.location.href;

      var socket = new WebSocket('wss://p3-websockets-TLHHWK-hwke19895462.codeanyapp.com/ws/draw');
    
    socket.onmessage = function(receivedMessage) 
      {
        StudentNamehh = document.getElementById("NameBox");
        var data = JSON.parse(receivedMessage.data);
        
        if(url == 'https://p3-websockets-tlhhwk-hwke19895462.codeanyapp.com/draw/studentinterface'){
          if(data.From == 'server' && data.To==StudentNamehh.value) { 
            if (data.Result == false) {
              switchQ();
            } if (data.Result == true)  {
              QuestionString = document.getElementById("Question");
              QuestionString.innerText=dic[currq];
              
              
            }
          
          }
          
          if(data.To==StudentNamehh.value)
          {
          if(data.Back==true){
            //BINGO SCREEN 
//               document.getElementById("SuccessImg").style.display= "block"; 
              stop();
            $("#qlabel").text("BINGO!");
            $("#qlabel").css({"color": "#ee3233", "font-size": "250px","left":"100px", "top": "80px"});

            
              
//               alert(data.Reason);
         // $("#timer").hide();
          
         // clearInterval(timer);
        }
          else if (data.Back==false)
          {
            alert(data.Reason);  
          } 
          
      }
          
          
      }
      
      
      
      };
    socket.onopen = function(event)
      {
        
      };
        
    // notify console if socket closes unexpectedly
    socket.onclose = function(e) 
      {
      console.error('Chat socket closed unexpectedly');
      };
  
  //timer

      function switchQ(){
         currq = nextq(currq);

         StudentName = document.getElementById("NameBox");

        var feedback=
        {
            To: 'server',
            From: StudentName.value,
            Question: dic[currq],
            
        }
        var informationJSON = JSON.stringify(feedback);
            socket.send(informationJSON);
      }
   
  function nextq(x){
    if (x == 17) {
      return 1;
    } else {
      return x + 1;
    }
  }
  
  window.onload = function(){
    $('#my-modal').modal('show');
    var height = $(window).height() - 200;

    QuestionString = document.getElementById("Question");
    currq = Math.floor(Math.random() * (Math.floor(17) - Math.ceil(1) + 1)) + Math.ceil(1);
    QuestionString.innerText=dic[currq];
   		

   
}
   
  var second=null;
  var timer = null;
  function stop()
  {
		clearInterval(timer);
    $( "#test" ).hide();
    $( "#submit" ).hide();
    $( "#switch" ).hide();
    $( "#Question" ).hide();
//     $( "#qlabel" ).hide();
	}
  function begintime()
  {
    second = document.getElementById("second");
		var  Second = 0;
    timer = setInterval(function()
      {
			Second++;
			if(Second < 10){
				second.innerText = "0" + Second;
			}else{
				second.innerText = Second;
			}
		},1000)
 
  }
  //for random question
  var dic = { 		
      1:'HCI stands for Human computer answer',
			2:'First phase of design cycle',
			3:'Second phase of design cycle',
			4:'Third phase of design cycle',
			5:'Architectural representation of a user interface',
			6:'Relationship between person and object',
			7:'Physical ornament on object copied from an object when made from another material',
			8:'How many waves are there in paradigms of HCI',
			9:'Model of a user that helps us think about users',
			10:'Users normally have three goals life end and ANSWER goals',
			11:'The Belmont principles are beneficence justice and ANSWER',
			12:'First phase of action cycle',
			13:'Second phase of action cycle',
			14:'Third phase of action cycle',
			15:'ANSWER walkthrough is when you pretend to be the user and walk through tasks',
      16:'ANSWER usability effect describes paradox that people think more aesthetic designs as more intuitive',
      17:'ANSWER tscale questions ask participants to express degree of agreement with a statement',
  };
</script>
</html>
